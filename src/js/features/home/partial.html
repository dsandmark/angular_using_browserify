<section class="header">
  <h1 class="header__title center">
    Ping pong league
  </h1>
</section>

<section class="main">

  <h2 class="main__title">Leaderboard:</h2>

  <div class="add-player" ng-if="vm.showAddPlayerContainer">
    <form novalidate>
      <label class="add-player__label" for="new-player-name">Name:</label>
      <input class="add-player__inputfield" type="text" id="new-player-name" ng-model="vm.newPlayerName" />
      <button class="add-player__button" ng-click="vm.addPlayer(vm.newPlayerName)">+</button>
    </form>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th class="table__header table__header--small">#</th>
        <th class="table__header table__header--small"></th>
        <th class="table__header table__header--large">
          <span class="left">Name</span>
          <a href="" class="right" ng-click="vm.showAddPlayer()">Add player</span>
        </th>
        <th class="table__header table__header--medium">Won</th>
        <th class="table__header table__header--medium">Lost</th>
        <th class="table__header table__header--medium">Won / Lost %</th>
        <th class="table__header table__header--medium">Points</th>
      </tr>
    </thead>
    <tbody>
      <tr data-ng-repeat="player in vm.players | orderBy:'won':true | limitTo: vm.nrOfPlayersShowing">
        <td class="table__cell">{{ $index + 1 }}</td>
        <td class="table__cell"></td>
        <td class="table__cell">
          <div class="table__cell--image"></div>
          <span class="table__cell--player">{{ player.name }}</span>
        </td>
        <td class="table__cell">{{ player.won }}</td>
        <td class="table__cell">{{ player.lost }}</td>
        <td class="table__cell">{{ vm.calculateWonLostPercentage(player) }}</td>
        <td class="table__cell">{{ player.points }}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td class="table__footer" colspan="7">
          <a href="" ng-click="vm.loadMorePlayers()">
            Load more ({{ vm.nrOfPlayersShowing }} / {{ vm.players.length }})
          </a>
        </td>
      </tr>
    </tfoot>
  </table>

</section>

<section class="footer">

  <div class="latest-games">

    <h3 class="latest-games__title">Latest games</h3>

    <div class="latest-games__game" ng-repeat="game in vm.games">
      <h4 class="latest-games__player">
        {{ game.playerOneName }} {{ game.playerOneWonSets }} -
        {{ game.playerTwoWonSets }} {{ game.playerTwoName }}
      </h4>

      <span ng-repeat="set in game.sets"
            ng-class="{'latest-games__set-label': !$last}">
        {{ set.playerOneScore }} - {{ set.playerTwoScore }}
      </span>

      <a href="" class="latest-games__remove"
         ng-click="vm.removeGame(game)">&#10006
      </a>
    </div>
  </div>

  <div class="add-games">

    <h3 class="add-games__title">Add games</h3>

    <select class="add-games__select"
            ng-model="vm.newGamePlayerOne"
            ng-options="player.name for player in vm.players">
    </select>

    <span class="add-games__vs">VS</span>

    <select class="add-games__select"
            ng-model="vm.newGamePlayerTwo"
            ng-options="player.name for player in vm.players">
    </select>

    <span class="add-games__score-label">Score (max. of 5)</span>

    <div class="add-games__set"
         ng-repeat="field in vm.nrOfSetFields track by $index">

      <input class="add-games__score"
             type="text"
             id="new-game-player-one-score"
             ng-model="vm.newGamePlayerOneScores[$index]" />

      <span>-</span>

      <input class="add-games__score"
             type="text"
             id="new-game-player-two-score"
             ng-model="vm.newGamePlayerTwoScores[$index]" />

      <a href="" ng-if="$last && vm.showAddSet" ng-click="vm.addSetFields()">
        <div class="add-games__add-set">Add set</div>
      </a>

    </div>

    <button class="add-games__submit" ng-click="vm.addGame()">Add game</button>

  </div>

</section>
